{% extends "base.html" %}

{% block content %}
  <div class="container main-content">
    <div class="row daily-row">
      <div class="col-md-12">
        <div class="nasa-search-container">
          <form method="POST" action="{% url 'tabs:nasa' %}">
            {% csrf_token %}
            <input name="nasa-search-input" class="nasa-search-input" type="text" placeholder='Search for...(e.g. "Orion")' name="search">
            <button type="submit"><i class="fa fa-search"></i></button><br>
            <label class="nasa-search-checkbox" for="Images"><input type="checkbox" name="nasa_search_checkboxes" value="image">Images</label>
            <label class="nasa-search-checkbox" for="Video"><input type="checkbox" name="nasa_search_checkboxes" value="video">Video</label>
            <label class="nasa-search-checkbox" for="Audio"><input type="checkbox" name="nasa_search_checkboxes" value="audio" label="Audio">Audio</label>
          </form>
        </div>
      </div>
    </div>
  </div>

  {% if nasa_search_input %}
    {% for category in categories %}
      <div class="container main-content nasa-main-content">
        <div class="row daily-row">
          <h3 class="nasa-search-title"><strong>{{ category.collection|length }} {{ category.name }} results for "{{ nasa_search_input }}":</strong></h3>
        </div>

        {% for item in category.collection %}
          <div class="row daily-row">
            <div class="col-md-4">
              <div class="nasa-image-wrapper">
                {% if category.name == 'video' %}
                  <a data-toggle="modal" data-target="#nasaModal" data-id="{{ item.url }}" data-filter="{{ category.name }}">
                    <img class="nasa-image" src="{{ item.preview_image }}" alt="">
                    <i class="fas fa-play fa-3x"></i>
                  </a>
                {% elif category.name == 'image' %}
                  <a data-toggle="modal" data-target="#nasaModal" data-id="{{ item.url }}" data-filter="{{ category.name }}">
                    <img class="nasa-image" src="{{ item.preview_image }}" alt="">
                  </a>
                {% elif category.name == 'audio' %}
                  <audio controls>
                    <source src="{{ item.url }}" type="audio/mpeg">
                    Your browser does not support the audio element.
                  </audio>
                {% endif %}
              </div>
            </div>
            <div class="col-md-8">
              <h5><strong>NASA ID: </strong>{{ item.nasa_id }}</h5>
              {% if item.title %}
                <h5><strong>Title: </strong>{{ item.title }}</h5>
              {% endif %}
              <h6><strong>Date Created: </strong>{{ item.create_date|date:"F jS, Y" }}</h6>
              <div class="nasa-description-container">
                <p>{{ item.description }}</p>
              </div>
            </div>
          </div>
          <hr>
        {% endfor %}
      </div>
    {% endfor %}
  {% endif %}

  <div class="modal fade" id="nasaModal" tabindex="-1" role="dialog" aria-labelledby="NasaModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content video-modal-content">
        <div class="modal-body embed-responsive embed-responsive-16by9">

        </div>
      </div>
    </div>
  </div>
{% endblock %}
